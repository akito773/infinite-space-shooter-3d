# 惑星着陸システム - 実装モックアップ

## 画面遷移イメージ

### 1. 着陸シーケンス
```
[宇宙空間]
    ↓ Lキー押下
[着陸可能惑星選択]
    ↓ 惑星選択
[着陸アニメーション]
    ↓
[惑星表面ビュー]
```

### 2. 惑星表面画面（初回着陸）

```
┌─────────────────────────────────────┐
│  惑星名: エメラルド                    │
│  所有者: なし                         │
│  開発度: ☆☆☆☆☆ (0%)              │
├─────────────────────────────────────┤
│                                     │
│         [空き地]                     │
│           ↓                         │
│    [建設可能マーク]                   │
│                                     │
│  資源: 鉄 ◆◆◇◇◇                   │
│       エネルギー ◆◇◇◇◇            │
│                                     │
├─────────────────────────────────────┤
│ [基地建設] [探索開始] [軌道に戻る]      │
└─────────────────────────────────────┘
```

### 3. 基地建設メニュー

```
┌─────────────────────────────────────┐
│        建設可能施設                   │
├─────────────────────────────────────┤
│ 📦 採掘施設 Lv1                      │
│    コスト: 💰1000 ⚡100              │
│    効果: 鉄を10/分 生産               │
│    建設時間: 30秒                    │
│                                     │
│ 🏠 居住区 Lv1                        │
│    コスト: 💰2000 ⚡200              │
│    効果: 人口+10、労働力+5            │
│    建設時間: 60秒                    │
│                                     │
│ ⚡ 発電所 Lv1                        │
│    コスト: 💰1500 ⚡50               │
│    効果: エネルギー+20/分             │
│    建設時間: 45秒                    │
└─────────────────────────────────────┘
```

### 4. 探索モード切り替え

```
【3D表面探索】
- WASDで移動
- 視点は三人称
- 採掘ポイントが光る
- Eキーで採掘

【2.5D地下探索】※将来実装
┌─────────────────────────────────────┐
│░░░░░░░░░░░░地表░░░░░░░░░░░░░░░░░░░│
│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓◆▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓▓▓ 🚶 ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓◆▓▓▓▓▓▓▓▓▓▓▓▓▓│
└─────────────────────────────────────┘
```

## 開発進行例

### Day 1（初回着陸）
1. 基地建設地点を選択
2. 採掘施設Lv1を建設（30秒待機）
3. 周辺を探索して追加資源発見
4. 手動で採掘（+50鉄獲得）

### Day 7（1週間後）
1. 採掘施設Lv3まで強化
2. 居住区と発電所を追加
3. 自動収入: 鉄30/分、エネルギー15/分
4. 地下1階層の入り口発見

### Day 30（1ヶ月後）
1. 地上施設5棟稼働中
2. 地下3階層まで探索済み
3. レア資源「量子結晶」を発見
4. 他プレイヤーからの交易オファー

## データ構造案

```javascript
// 惑星データ
{
  planetId: "planet_001",
  name: "エメラルド",
  type: "terrestrial",
  owner: "player123",
  coordinates: { x: 300, y: -30, z: 400 },
  
  // 開発状況
  development: {
    level: 3,
    population: 150,
    buildings: [
      { id: "mine_01", type: "mine", level: 3, position: {x: 0, y: 0} },
      { id: "house_01", type: "residence", level: 2, position: {x: 1, y: 0} }
    ]
  },
  
  // 資源
  resources: {
    iron: { amount: 1250, rate: 30 },
    energy: { amount: 500, rate: 15 },
    quantum: { amount: 5, rate: 0 }
  },
  
  // 探索状況
  exploration: {
    surfaceExplored: 0.75,  // 75%
    undergroundLayers: [
      { depth: 1, explored: 0.5, discovered: ["iron_vein_large"] },
      { depth: 2, explored: 0.2, discovered: ["ancient_ruin_01"] }
    ]
  }
}
```

## プレイヤー行動パターン予測

### タイプA: 効率重視プレイヤー
- 最適な建設順序を計算
- 資源効率を最大化
- 早期の自動化を目指す

### タイプB: 探索重視プレイヤー
- 建設は最小限
- 地下深層を目指す
- レアアイテム収集

### タイプC: 制覇プレイヤー
- 複数惑星を同時開発
- PvP要素に積極参加
- 領土拡大を重視

## 技術的実装課題

### 1. シーン管理
- 宇宙空間 ↔ 惑星表面の切り替え
- メモリ効率を考慮した読み込み

### 2. データ永続化
- 建設状況の保存
- オフライン進行の計算

### 3. マルチプレイ同期
- 惑星所有権の管理
- リアルタイム更新の必要性検討

### 4. パフォーマンス
- 多数の建物表示
- 自動計算の最適化

このような段階的な実装により、最初はシンプルな都市建設から始めて、徐々に探索要素やマルチプレイ要素を追加していくことができます。