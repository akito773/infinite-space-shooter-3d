# 2.5D平面ベース宇宙空間設計

## 概要
3D空間を維持しながら、主要なゲームプレイを平面（Y軸制限）に集中させることで、操作性と広大さを両立する。

## 座標系の定義

### Y軸の制限
```
プレイヤー移動範囲: Y = -30 ～ +30
惑星配置: Y = -10 ～ +10
宇宙ステーション: Y = 0 ～ +20
小惑星: Y = -20 ～ +20
```

### 空間の広がり
- X軸: -50,000 ～ +50,000 ユニット
- Z軸: -50,000 ～ +50,000 ユニット
- 各惑星エリア: 半径 10,000 ユニット

## プレイヤー移動の調整

### 基本移動
- 前後左右の移動を主体
- 上下移動は補助的（速度を1/3に制限）
- カメラは斜め上から俯瞰（トップダウンに近い）

### 自動高度調整
```javascript
// プレイヤーが中央高度に戻る傾向
if (Math.abs(player.position.y) > 5) {
    player.position.y *= 0.98; // 徐々に中央へ
}
```

## オブジェクト配置ルール

### 惑星
- 基本高度: Y = 0
- バリエーション: ±10
- 理由: 重力的に安定した軌道面

### 宇宙ステーション
- 基本高度: Y = 10
- バリエーション: 0 ～ +20
- 理由: 惑星の上空に浮遊

### 小惑星帯
- ドーナツ状の分布
- Y = -20 ～ +20
- 中心ほど密度が高い

### 敵の配置
- 通常敵: Y = -15 ～ +15
- ボス: Y = 0（平面での戦闘）
- 編隊: 平面的なフォーメーション

## カメラシステム

### デフォルトビュー
```javascript
camera.position.set(0, 40, 50);  // 斜め上から
camera.lookAt(player.position);
camera.fov = 60; // 広い視野
```

### ダイナミックカメラ
- 速度に応じてズームアウト
- 戦闘時は少し引く
- ワープ時は大きく引く

## ミニマップの改善

### 2D投影
- XZ平面を上から見た図
- Y座標は色の濃淡で表現
- グリッド表示で距離感を提供

### 表示要素
```
● プレイヤー（白）
◆ 惑星（サイズで高度表現）
▲ ステーション（明るさで高度）
・ 小惑星（点の大きさで高度）
```

## UI配置

### HUDレイアウト
```
[ミニマップ]              [レーダー]
     ↑                        ↑
  平面図                   高度表示

[体力バー] [シールド] [エネルギー]
        [スコア/情報]
```

### 高度インジケーター
- 画面左側に垂直バー
- 現在高度を表示
- 推奨高度帯をハイライト

## メリット

1. **パフォーマンス向上**
   - カリング効率向上
   - 描画オブジェクト削減
   
2. **ゲームプレイ**
   - 位置把握が容易
   - 戦略的な移動
   - アイテム発見しやすい

3. **拡張性**
   - より広大なマップ
   - 多数のオブジェクト配置
   - ゾーン分割が簡単

## 実装手順

1. **Phase 1**: プレイヤー移動制限
2. **Phase 2**: カメラ調整
3. **Phase 3**: 既存オブジェクトの再配置
4. **Phase 4**: ミニマップ改善
5. **Phase 5**: 新規コンテンツを平面ベースで追加