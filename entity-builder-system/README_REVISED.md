# Entity Builder System - 3D機体モデリングアプリ

## プロジェクト概要

3D宇宙シューティングゲーム用の**3Dモデリング・テクスチャリングアプリケーション**。
ブラウザ上で機体・敵・ボスの3Dモデルを作成し、テクスチャを適用できるツール。

## 主要機能

### 1. 3Dモデリング機能

#### 基本形状ツール
- **プリミティブ形状**
  - Box、Sphere、Cylinder、Cone、Torus
  - カスタム形状（ExtrudeGeometry）
  
- **パーツ組み立て**
  - ドラッグ&ドロップでパーツ配置
  - スナップ機能
  - グループ化・階層構造
  
- **編集ツール**
  - 移動、回転、スケール
  - 頂点編集
  - エッジ編集
  - 面の分割・結合

#### モデリング専用機能
- **対称編集モード**（左右対称の機体作成）
- **パーツライブラリ**
  - 翼、エンジン、武器、コックピットなどのプリセット
  - カスタムパーツ保存
  
- **メッシュ操作**
  - Boolean演算（結合、切り抜き、交差）
  - スムージング
  - 細分化（Subdivision）

### 2. テクスチャリング機能

#### テクスチャペイント
- **3Dペイントツール**
  - ブラシツール
  - スポイトツール
  - 塗りつぶし
  - グラデーション

- **レイヤーシステム**
  - 複数レイヤー対応
  - ブレンドモード
  - マスク機能

#### マテリアル設定
- **PBR（物理ベースレンダリング）**
  - Albedo（基本色）
  - Metalness（金属性）
  - Roughness（粗さ）
  - Normal Map
  - Emission（発光）

- **プリセットマテリアル**
  - 金属、プラスチック、ガラス、エネルギーシールド

### 3. UV展開・マッピング

- **自動UV展開**
- **手動UV編集**
- **テクスチャアトラス生成**

### 4. リアルタイムプレビュー

- **360度ビュー**
- **ライティングプレビュー**
- **アニメーションプレビュー**（エンジン炎、回転部品など）

## 技術仕様

### フロントエンド
```javascript
// 主要ライブラリ
- Three.js - 3Dレンダリング
- React - UI フレームワーク
- Three.js CSG - Boolean演算
- UV展開ライブラリ
```

### UI構成
```
┌─────────────────────────────────────────────────┐
│  メニューバー（ファイル、編集、ビュー、ツール）    │
├─────────┬───────────────────────┬───────────────┤
│         │                       │               │
│ ツール  │    3Dビューポート     │ プロパティ   │
│ パネル  │                       │ パネル       │
│         │                       │               │
│・形状    │                       │・トランスフォーム│
│・編集    │                       │・マテリアル   │
│・ペイント│                       │・モディファイア│
│         │                       │               │
├─────────┴───────────────────────┴───────────────┤
│          タイムライン／アニメーション             │
└─────────────────────────────────────────────────┘
```

## 出力フォーマット

### エクスポート形式
- **3Dモデル**: GLTF/GLB形式
- **テクスチャ**: PNG/JPG
- **設定ファイル**: JSON（メタデータ）

### メインゲームとの統合
```javascript
// エクスポートされたデータ構造
{
  "model": {
    "file": "player_ship_01.glb",
    "scale": [1, 1, 1],
    "animations": ["idle", "boost"]
  },
  "textures": {
    "albedo": "textures/player_ship_01_albedo.png",
    "normal": "textures/player_ship_01_normal.png",
    "metalness": "textures/player_ship_01_metalness.png",
    "roughness": "textures/player_ship_01_roughness.png",
    "emission": "textures/player_ship_01_emission.png"
  },
  "metadata": {
    "name": "カスタム戦闘機",
    "author": "Player123",
    "created": "2025-07-21",
    "vertices": 1234,
    "faces": 2468,
    "materials": 3
  },
  "gameData": {
    "hitbox": "auto",
    "weaponMounts": [
      {"position": [1.5, 0, -2], "type": "primary"},
      {"position": [-1.5, 0, -2], "type": "primary"}
    ],
    "enginePositions": [
      {"position": [0, 0, 3], "scale": 1.0}
    ]
  }
}
```

## 開発ロードマップ

### Phase 1: 基本モデリング
- 基本形状の作成・編集
- パーツの組み合わせ
- 簡単な変形ツール

### Phase 2: テクスチャリング
- 3Dペイント機能
- UV展開
- マテリアル設定

### Phase 3: 高度な機能
- Boolean演算
- 頂点編集
- アニメーション

### Phase 4: 最適化・統合
- ポリゴン数最適化
- LOD生成
- ゲームエンジン統合

## インスピレーション元
- Blender（シンプル版）
- Spline（Web3Dツール）
- Microsoft 3D Builder

このアプリにより、プレイヤーが独自の機体を3Dモデリングし、テクスチャを描いて、ゲーム内で使用できるようになります。